<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeepImagix AI - Generate Image</title>
<style>
      :root {
        --primary: #8b5cf6;
        --secondary: #c4b5fd;
        --dark: #1f2937;
        --light: #f9fafb;
        --success: #10b981;
        --warning: #f59e0b;
        --danger: #ef4444;
      }
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      }
      body {
        background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 80px 20px 20px;
      }
      header {
        background: rgba(255, 255, 255, 0.95);
        padding: 20px;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      header h1 {
        color: var(--primary);
        font-size: 24px;
      }
      nav ul {
        list-style: none;
        display: flex;
        gap: 20px;
      }
      nav a {
        text-decoration: none;
        color: var(--dark);
        font-weight: 500;
        transition: color 0.3s ease;
      }
      nav a:hover {
        color: var(--primary);
      }
      .container {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        width: 100%;
        max-width: 600px;
        padding: 40px;
        text-align: center;
      }
      h2 {
        color: var(--primary);
        margin-bottom: 15px;
        font-size: 28px;
      }
      .tagline {
        color: var(--dark);
        margin-bottom: 25px;
        opacity: 0.7;
      }
      .input-group {
        margin-bottom: 20px;
      }
      input, select {
        width: 100%;
        padding: 12px 20px;
        border: 2px solid #e5e7eb;
        border-radius: 25px;
        font-size: 15px;
        transition: all 0.3s ease;
      }
      input:focus, select:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.2);
      }
      select option[disabled] {
        color: #9ca3af;
      }
      .generate-btn-container {
        position: relative;
        margin-bottom: 20px;
      }
      button {
        background: var(--primary);
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 25px;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        width: 100%;
        position: relative;
      }
      button:hover:not(:disabled) {
        background: #7c3aed;
        transform: translateY(-2px);
        box-shadow: 0 5px 20px rgba(139, 92, 246, 0.4);
      }
      button:disabled {
        background: #9ca3af;
        cursor: not-allowed;
      }
      .progress-bar {
        position: absolute;
        bottom: -8px;
        left: 0;
        height: 4px;
        background: var(--success);
        border-radius: 2px;
        width: 0;
        transition: width 0.1s linear;
      }
      .status {
        padding: 12px;
        border-radius: 8px;
        margin-bottom: 15px;
        font-weight: 500;
        font-size: 14px;
        display: none;
      }
      .status.processing {
        background: #fefce8;
        color: #d97706;
        display: block;
      }
      .status.success {
        background: #ecfdf5;
        color: var(--success);
        display: block;
      }
      .status.error {
        background: #fef2f2;
        color: var(--danger);
        display: block;
      }
      .result-container {
        margin-top: 25px;
        display: none;
      }
      .generated-image {
        width: 100%;
        border-radius: 12px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }
      .loading {
        display: inline-block;
        width: 16px;
        height: 16px;
        border: 3px solid rgba(255,255,255,.3);
        border-radius: 50%;
        border-top-color: white;
        animation: spin 1s ease-in-out infinite;
        margin-right: 8px;
      }
      @keyframes spin {
        to { transform: rotate(360deg); }
      }
      .popup-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        z-index: 2000;
        justify-content: center;
        align-items: center;
      }
      .popup {
        background: #fff;
        border-radius: 15px;
        padding: 30px;
        width: 90%;
        max-width: 500px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        position: relative;
        animation: popupFadeIn 0.3s ease;
      }
      @keyframes popupFadeIn {
        from { transform: scale(0.9); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
      }
      .popup h3 {
        color: var(--primary);
        margin-bottom: 15px;
        font-size: 24px;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .popup p {
        color: var(--dark);
        margin-bottom: 20px;
        line-height: 1.5;
      }
      .popup-buttons {
        display: flex;
        gap: 15px;
        justify-content: center;
      }
      .popup-buttons button {
        width: auto;
        padding: 10px 30px;
      }
      .popup-buttons .agree {
        background: var(--primary);
      }
      .popup-buttons .disagree {
        background: var(--danger);
      }
</style>
  </head>
  <body>
    <header>
      <h1>âœ¨ DeepImagix AI</h1>
      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="DeepImagix.html">Try it</a></li>
        </ul>
      </nav>
    </header>

    <div class="container">
      <h2>Generate Your Image</h2>
      <p class="tagline">Create magical visuals with artificial intelligence</p>

      <div class="input-group">
        <input type="text" id="prompt" placeholder="Describe your imagination...">
      </div>

      <div class="input-group">
        <select id="model">
          <option value="cute-creature-generator">Cute Creature Generator (Default)</option>
          <option value="fantasy-world-generator">Fantasy World Generator</option>
          <option value="cyberpunk-generator">Cyberpunk Generator</option>
          <option value="anime-portrait-generator">Anime Portrait Generator</option>
          <option value="old-style-generator">Old Style Generator</option>
          <option value="renaissance-painting-generator">Renaissance Painting Generator</option>
          <option value="abstract-painting-generator">Abstract Painting Generator</option>
          <option value="impressionism-painting-generator">Impressionism Painting Generator</option>
          <option value="surreal-graphics-generator">Surreal Graphics Generator</option>
          <option value Reset="3d-objects-generator">3D Objects Generator</option>
          <option value="origami-3d-generator">Origami 3D Generator</option>
          <option value="hologram-3d-generator">Hologram 3D Generator</option>
          <option value="3d-character-generator">3D Character Generator</option>
          <option value="watercolor-painting-generator">Watercolor Painting Generator</option>
          <option value="pop-art-generator">Pop Art Generator</option>
          <option value="contemporary-architecture-generator">Contemporary Architecture Generator</option>
          <option value="future-architecture-generator">Future Architecture Generator</option>
          <option value="watercolor-architecture-generator">Watercolor Architecture Generator</option>
          <option value="fantasy-character-generator">Fantasy Character Generator</option>
          <option value="steampunk-generator">Steampunk Generator</option>
          <option value="ai-logo-generator">AI Logo Generator</option>
          <option value="pixel-art-generator">Pixel Art Generator</option>
          <option value="street-art-generator">Street Art Generator</option>
          <option value="surreal-portrait-generator">Surreal Portrait Generator</option>
          <option value="anime-world-generator">Anime World Generator</option>
          <option value="fantasy-portrait-generator">Fantasy Portrait Generator</option>
          <option value="comics-portrait-generator">Comics Portrait Generator</option>
          <option value="cyberpunk-portrait-generator">Cyberpunk Portrait Generator</option>
          <option value="neo-noir-generator">Neo-Noir Generator</option>
          <option value="pixel-world-generator">Pixel World Generator</option>
          <option value="manga-panel-generator">Manga Panel Generator</option>
          <option value="3d-cartoon-generator">3D Cartoon Generator</option>
          <option value="fantasy-map-generator">Fantasy Map Generator</option>
          <option value="cyber-beast-generator">Cyber Beast Generator</option>
          <option value="dystopian-landscape-generator">Dystopian Landscape Generator</option>
          <option value="ocean-life-generator">Ocean Life Generator</option>
          <option value="space-world-generator">Space World Generator</option>
          <option value="comics-superhero-generator">Comics Superhero Generator</option>
          <option value="anime-superhero-generator">Anime Superhero Generator</option>
          <option value="prophetic-vision-generator">Prophetic Vision Generator</option>
          <option value="grotesque-art-generator">Grotesque Art Generator</option>
          <option value="tribal-art-generator">Tribal Art Generator</option>
          <option value="mysticism-art-generator">Mysticism Art Generator</option>
          <option value="urban-fashion-generator">Urban Fashion Generator</option>
          <option value="children-book-generator">Children Book Generator</option>
          <option value="minimalistic-art-generator">Minimalistic Art Generator</option>
          <option value="art-deco-generator">Art Deco Generator</option>
          <option value="haunted-portrait-generator">Haunted Portrait Generator</option>
          <option value="steampunk-landscape-generator">Steampunk Landscape Generator</option>
          <option value="art-nouveau-generator">Art Nouveau Generator</option>
          <option value="baroque-art-generator">Baroque Art Generator</option>
          <option value="gothic-art-generator">Gothic Art Generator</option>
          <option value="cubist-art-generator">Cubist Art Generator</option>
          <option value="romantic-art-generator">Romantic Art Generator</option>
          <option value="photorealistic-portrait-generator">Photorealistic Portrait Generator</option>
          <option value="chibi-character-generator">Chibi Character Generator</option>
          <option value="dreamscape-generator">Dreamscape Generator</option>
          <option value="mecha-suit-generator">Mecha Suit Generator</option>
          <option value="abstract-expressionism-generator">Abstract Expressionism Generator</option>
          <option value="supernatural-character-generator">Supernatural Character Generator</option>
          <option value="gladiator-arena-generator">Gladiator Arena Generator</option>
          <option value="solar-system-generator">Solar System Generator</option>
          <option value="alien-flora-generator">Alien Flora Generator</option>
          <option value="renaissance-fresco-generator">Renaissance Fresco Generator</option>
          <option value="depths-sea-generator">Depths Sea Generator</option>
          <option value="fairy-tale-art-generator">Fairy Tale Art Generator</option>
          <option value="mythic-creature-generator">Mythic Creature Generator</option>
          <option value="post-apocalyptic-generator">Post-Apocalyptic Generator</option>
          <option value="ancient-egyptian-generator">Ancient Egyptian Generator</option>
          <option value="urban-graffiti-generator">Urban Graffiti Generator</option>
          <option value="wild-west-generator">Wild West Generator</option>
          <option value="old-masters-generator">Old Masters Generator</option>
          <option value="origami-paper-generator">Origami Paper Generator</option>
          <option value="carnival-scene-generator">Carnival Scene Generator</option>
          <option value="retro-game-generator">Retro Game Generator</option>
          <option value="action-figure-generator">Action Figure Generator</option>
          <option value="greek-mythology-generator">Greek Mythology Generator</option>
          <option value="underground-cityscape-generator">Underground Cityscape Generator</option>
          <option value="film-poster-generator">Film Poster Generator</option>
          <option value="spaceship-blueprint-generator">Spaceship Blueprint Generator</option>
          <option value="zombie-apocalypse-generator">Zombie Apocalypse Generator</option>
          <option value="concrete-jungle-generator">Concrete Jungle Generator</option>
          <option value="bioluminescent-life-generator">Bioluminescent Life Generator</option>
          <option value="ice-world-generator">Ice World Generator</option>
          <option value="bauhaus-design-generator">Bauhaus Design Generator</option>
          <option value="intergalactic-battle-generator">Intergalactic Battle Generator</option>
          <option value="atlantis-world-generator">Atlantis World Generator</option>
          <option value="samurai-art-generator">Samurai Art Generator</option>
          <option value="ice-sculpture-generator">Ice Sculpture Generator</option>
          <option value="opera-costume-generator">Opera Costume Generator</option>
          <option value="ancient-hieroglyph-generator">Ancient Hieroglyph Generator</option>
          <option value="solar-flare-generator">Solar Flare Generator</option>
          <option value="kawaii-emoji-generator">Kawaii Emoji Generator</option>
          <option value="psychedelic-poster-generator">Psychedelic Poster Generator</option>
          <option value="witchcraft-symbol-generator">Witchcraft Symbol Generator</option>
          <option value="alien-civilization-generator">Alien Civilization Generator</option>
          <option value="cave-painting-generator">Cave Painting Generator</option>
          <option value="mechanical-anatomy-generator">Mechanical Anatomy Generator</option>
          <option value="surrealist-sculpture-generator">Surrealist Sculpture Generator</option>
          <option value="stained-glass-generator">Stained Glass Generator</option>
          <option value="gothic-literature-generator">Gothic Literature Generator</option>
          <option value="colonial-portrait-generator">Colonial Portrait Generator</option>
          <option value="unreal-cityscape-generator">Unreal Cityscape Generator</option>
          <option value="clockwork-toy-generator">Clockwork Toy Generator</option>
          <option value="marionette-design-generator">Marionette Design Generator</option>
          <option value="post-impressionist-painting-generator">Post-Impressionist Painting Generator</option>
          <option value="tropical-paradise-generator">Tropical Paradise Generator</option>
          <option value="elven-world-generator">Elven World Generator</option>
          <option value="zentangle-design-generator">Zentangle Design Generator</option>
          <option value="mars-life-generator">Mars Life Generator</option>
          <option value="brutalist-architecture-generator">Brutalist Architecture Generator</option>
          <option value="political-satire-generator">Political Satire Generator</option>
          <option value="treehouse-design-generator">Treehouse Design Generator</option>
          <option value="ancient-mayan-art-generator">Ancient Mayan Art Generator</option>
          <option value="decoupage-art-generator">Decoupage Art Generator</option>
          <option value="terrarium-world-generator">Terrarium World Generator</option>
          <option value="dystopian-cyberpunk-generator">Dystopian Cyberpunk Generator</option>
          <option value="film-collage-generator">Film Collage Generator</option>
          <option value="zodiac-design-generator">Zodiac Design Generator</option>
          <option value="robot-battle-generator">Robot Battle Generator</option>
          <option value="playing-card-generator">Playing Card Generator</option>
          <option value="gothic-architecture-generator">Gothic Architecture Generator</option>
        </select>
      </div>

      <div class="generate-btn-container">
        <button id="generateBtn" onclick="showTermsPopup()">Generate Image</button>
        <div id="progressBar" class="progress-bar"></div>
      </div>

      <div id="status" class="status"></div>

      <div class="result-container" id="resultContainer">
        <h3>Your Creation</h3>
        <img id="generatedImage" class="generated-image" src="" alt="AI Generated Image">
        <button onclick="viewFullImage()">View Full Image</button>
      </div>
    </div>

    <div class="popup-overlay" id="termsPopup">
      <div class="popup">
        <h3>ðŸ¤– Terms of Use</h3>
        <p>Welcome to DeepImagix AI! By using our image generation service, you agree to our Terms of Use. We utilize advanced AI to create unique images based on your prompts. Please note that generated content should not be used for illegal purposes, and we reserve the right to monitor usage to ensure compliance with our policies.</p>
        <div class="popup-buttons">
          <button class="agree" onclick="agreeToTerms()"> Agree</button>
          <button class="disagree" onclick="disagreeToTerms()">Disagree</button>
        </div>
      </div>
    </div>
    <!-- Add this at the bottom of the body, before your existing script -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-auth.js";

  // Your Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyDNmdMRjTSOszMo9RxYeykDmTcFqmj-DUg",
    authDomain: "deepimagix-web.firebaseapp.com",
    projectId: "deepimagix-web",
    storageBucket: "deepimagix-web.firebasestorage.app",
    messagingSenderId: "84052335131",
    appId: "1:84052335131:web:ff0535a4da12b85aadf6be",
    measurementId: "G-MNK3EXSCX6"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  
  // Track user login state globally
  window.authState = {
    isLoggedIn: false,
    user: null
  };

  // Monitor auth state changes
  onAuthStateChanged(auth, (user) => {
    if (user) {
      window.authState.isLoggedIn = true;
      window.authState.user = user;
      console.log("User is logged in:", user.email);
    } else {
      window.authState.isLoggedIn = false;
      window.authState.user = null;
      console.log("User is not logged in");
    }
  });
</script>

<script>
  let progress = 0;
  let termsAgreed = false;
  let progressInterval;

  function showTermsPopup() {
    // Check if user is logged in first
    if (!window.authState.isLoggedIn) {
      showStatus('Please log in to generate images. <a href="DeepImagix-login.html" style="color: white; text-decoration: underline;">Login here</a>', 'error');
      return;
    }

    if (termsAgreed) {
      generateImage();
    } else {
      document.getElementById('termsPopup').style.display = 'flex';
    }
  }

  function agreeToTerms() {
    termsAgreed = true;
    document.getElementById('termsPopup').style.display = 'none';
    generateImage();
  }

  function disagreeToTerms() {
    document.getElementById('termsPopup').style.display = 'none';
    showStatus('You must agree to the Terms of Use to generate images.', 'error');
  }

  async function generateImage() {
    // Double-check authentication status
    if (!window.authState.isLoggedIn) {
      showStatus('Session expired. Please log in again to generate images.', 'error');
      return;
    }

    const prompt = document.getElementById('prompt').value.trim();
    const model = document.getElementById('model').value;
    const generateBtn = document.getElementById('generateBtn');
    const progressBar = document.getElementById('progressBar');

    if (!prompt) {
      showStatus('Please enter a prompt!', 'error');
      return;
    }

    generateBtn.disabled = true;
    generateBtn.innerHTML = '<span class="loading"></span> Generating...';
    showStatus('âœ¨ DeepImagixing...', 'processing');
    document.getElementById('resultContainer').style.display = 'none';
    progressBar.style.width = '0%';
    progress = 0;

    try {
      // Step 1: Initial request to get task_url
      const encodedText = encodeURIComponent(prompt);
      const initialUrl = `https://api.paxsenix.biz.id/ai-image/deepai?text=${encodedText}&style=${model}`;

      const initialResponse = await fetch(initialUrl, {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json'
        }
      });

      if (!initialResponse.ok) {
        throw new Error(`Initial request failed with status ${initialResponse.status}: ${await initialResponse.text()}`);
      }

      const initialData = await initialResponse.json();
      if (!initialData.task_url) {
        throw new Error('An error occured, please try again');
      }

      const taskUrl = initialData.task_url;

      // Start progress bar animation for 10 seconds
      progressInterval = setInterval(() => {
        progress += 10; // Increment by 10% every second
        if (progress > 90) progress = 90; // Cap at 90% until final response
        progressBar.style.width = `${progress}%`;
      }, 1000);

      // Step 2: Poll task_url after 10 seconds
      setTimeout(async () => {
        try {
          const taskResponse = await fetch(taskUrl, {
            method: 'GET',
            headers: {
              'Content-Type': 'application/json'
            }
          });

          if (!taskResponse.ok) {
            throw new Error(`Task request failed with status ${taskResponse.status}: ${await taskResponse.text()}`);
          }

          const taskData = await taskResponse.json();
          const imageUrl = taskData.url; // Assuming the task_url response has a "url" field

          clearInterval(progressInterval);
          progressBar.style.width = '100%';
          const img = document.getElementById('generatedImage');
          img.src = imageUrl;
          document.getElementById('resultContainer').style.display = 'block';
          showStatus('Image generated successfully!', 'success');
          resetUI();
        } catch (error) {
          console.error('Task fetch error:', error.message);
          showStatus(`Error: ${error.message}`, 'error');
          clearInterval(progressInterval);
          resetUI();
        }
      }, 10000); // 10-second delay

    } catch (error) {
      console.error('An error occured, please try again');
      showStatus(`Error: ${error.message}`, 'error');
      clearInterval(progressInterval);
      resetUI();
    }
  }

  function showStatus(message, type) {
    const statusDiv = document.getElementById('status');
    statusDiv.innerHTML = type === 'processing' 
      ? `<span class="loading"></span> ${message}` 
      : message;
    statusDiv.className = `status ${type}`;
  }

  function resetUI() {
    const generateBtn = document.getElementById('generateBtn');
    generateBtn.disabled = false;
    generateBtn.innerHTML = 'Generate Image';
    document.getElementById('progressBar').style.width = '0%';
    progress = 0;
  }

  function viewFullImage() {
    const imageUrl = document.getElementById('generatedImage').src;
    if (!imageUrl || imageUrl === '') {
      showStatus('No image to view!', 'error');
      return;
    }
    window.open(imageUrl, '_blank');
  }
</script>
  </body>
</html>
